<!DOCTYPE html>

<html>
	<head>
    	<title>Registration Form Details</title>
  	</head>

  	<body>

		<h1>Enter your registration details....</h1>

		<h5> {{msg}} </h5> <!-- Error Message displayed here -->

		<!-- Form for details -->
		<form action="{{url_for('prg9serverFunction')}}" method="POST" onsubmit="return validateRegForm()" id="register">
		 	USN (Eg. 1MS02IS001) : <input name = "usn" type="text" required /><br>
		  	D.O.B (Eg. dd/mm/yyyy) : <input name = "dob" type="text" required /><br>
			<input name = "Register" type = "submit" />
		</form>


		<!-- Javascript to validate form details -->
		<script>
			function validateRegForm()
			{
				var form = document.getElementById("register");

				// Regex for USN
				var usn = /^[1][A-Z][A-Z][0-9][0-9][A-Z][A-Z][0-9][0-9][0-9]$/;

				// Check if USN format matches regex
				if(!usn.test(form.usn.value))
				{
					alert("Invalid USN Format");
			        return false;
				}

				// Regex for date format
				var date =/^([0][1-9]|[12][0-9]|[3][01])[/]([0][1-9]|[1][012])[/]\d{4}$/;

				// Check if date format matches regex
				if(!date.test(form.dob.value))
				{
					alert("Invalid Date Format - enter dd/mm/yyyy");
			        return false;
				}
				// Returns true if form entries are valid
				return true;
			}
		</script>
	</body>

</html>
